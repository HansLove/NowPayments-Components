import { Meta } from '@storybook/addon-docs/blocks'

<Meta title="NOWPayments Components/Introduction" />

<style>
  {`
    .sb-container {
      margin-bottom: 48px;
    }

    .sb-section {
      width: 100%;
      display: flex;
      flex-direction: row;
      gap: 20px;
    }

    .sb-section-title {
      margin-bottom: 32px;
    }

    .sb-section-item {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .sb-section-item-heading {
      padding-top: 20px !important;
      padding-bottom: 5px !important;
      margin: 0 !important;
    }
    .sb-section-item-paragraph {
      margin: 0;
      padding-bottom: 10px;
    }

    .sb-section-item a:not(h1 a, h2 a, h3 a) {
      font-size: 14px;
    }

    .sb-explore-image {
      max-height: 32px;
    }

    .sb-addon {
      width: 100%;
      display: flex;
      align-items: center;
      position: relative;
      background-color: #EEF3F8;
      border-radius: 5px;
      border: 2px solid #E0E8F0;
      padding: 20px;
      margin-bottom: 48px;
    }

    .sb-addon-text {
      padding-left: 48px;
      max-width: 240px;
    }

    .sb-addon-text h4 {
      padding-top: 0px;
    }

    .sb-addon-img {
      position: absolute;
      left: 20px;
      top: 20px;
      height: 48px;
      width: 48px;
    }

    .sb-addon-img img {
      max-width: 100%;
      height: auto;
    }

    @media screen and (max-width: 800px) {
      .sb-section {
        flex-direction: column;
      }
    }
  `}
</style>

# Welcome to NOWPayments Components

**React component library for cryptocurrency deposits and withdrawals using NOWPayments API.**

NOWPayments Components provides ready-to-use React components for implementing cryptocurrency payment flows in your applications. This Storybook demonstrates all available components with interactive examples and documentation.

<div className="sb-container">
  <div className="sb-section-title">
    ## Key Features

    - üîê **Frontend-only currency display** - Fetches available currencies from NOWPayments for UI
    - üéØ **Flexible backend integration** - Your backend handles payment logic and webhooks
    - üé® **CSS-first theming** - Customize appearance with CSS custom properties
    - üì± **Mobile-responsive** - Works seamlessly across devices
    - ‚ö° **TypeScript ready** - Full type safety with comprehensive interfaces

  </div>
</div>

<div className="sb-container">
  <div className="sb-section-title">
    ## Main Components
  </div>

  <div className="sb-section">
    <div className="sb-section-item">
      <div className="sb-explore-image">
        üí∞
      </div>
      <h4 className="sb-section-item-heading">DepositModal</h4>
      <p className="sb-section-item-paragraph">
        A 3-step cryptocurrency deposit flow with currency selection, amount input, and payment confirmation.
      </p>
      <a href="?path=/story/nowpayments-depositmodal--default" target="_self">
        View stories ‚Üí
      </a>
    </div>

    <div className="sb-section-item">
      <div className="sb-explore-image">
        üí∏
      </div>
      <h4 className="sb-section-item-heading">WithdrawModal</h4>
      <p className="sb-section-item-paragraph">
        Single-form withdrawal modal with network selection, amount slider, and destination address input.
      </p>
      <a href="?path=/story/nowpayments-withdrawmodal--default" target="_self">
        View stories ‚Üí
      </a>
    </div>

    <div className="sb-section-item">
      <div className="sb-explore-image">
        üß©
      </div>
      <h4 className="sb-section-item-heading">Shared Components</h4>
      <p className="sb-section-item-paragraph">
        Reusable UI components including Modal, Button, Input, CurrencySelector, and more.
      </p>
      <a href="?path=/story/shared-button--primary" target="_self">
        Explore components ‚Üí
      </a>
    </div>

  </div>
</div>

<div className="sb-container">
  <div className="sb-section-title">
    ## Architecture Philosophy
  </div>

  <div className="sb-section">
    <div className="sb-section-item">
      <h4 className="sb-section-item-heading">Frontend Responsibilities</h4>
      <p className="sb-section-item-paragraph">
        ‚Ä¢ Display available currencies from NOWPayments<br/>
        ‚Ä¢ Collect and validate form data<br/>
        ‚Ä¢ Handle UI states (loading, error, success)<br/>
        ‚Ä¢ Provide theming and customization
      </p>
    </div>

    <div className="sb-section-item">
      <h4 className="sb-section-item-heading">Backend Responsibilities</h4>
      <p className="sb-section-item-paragraph">
        ‚Ä¢ Process payments with NOWPayments API<br/>
        ‚Ä¢ Handle webhooks and IPN callbacks<br/>
        ‚Ä¢ Manage business logic<br/>
        ‚Ä¢ User and session management
      </p>
    </div>

    <div className="sb-section-item">
      <h4 className="sb-section-item-heading">Data Flow</h4>
      <p className="sb-section-item-paragraph">
        1. Frontend fetches currencies for display<br/>
        2. User fills form ‚Üí Fixed schema<br/>
        3. onSubmit() ‚Üí Your backend<br/>
        4. Backend processes ‚Üí Custom response<br/>
        5. onSuccess() ‚Üí Handle any schema
      </p>
    </div>

  </div>
</div>

<div className="sb-addon">
  <div className="sb-addon-text">
    <h4>Theming with CSS Variables</h4>
    <p className="sb-section-item-paragraph">
      Customize the appearance using CSS custom properties. No JavaScript configuration needed.
    </p>
    <a href="?path=/docs/theming-css-variables--docs" target="_self">
      Learn about theming ‚Üí
    </a>
  </div>
  <div className="sb-addon-img">üé®</div>
</div>

## Quick Setup

```bash
npm install @taloon/nowpayments-components
```

```tsx
import { DepositModal, useNowPaymentsStore } from '@taloon/nowpayments-components'
import '@taloon/nowpayments-components/styles'

// Initialize with your NOWPayments API key
const store = useNowPaymentsStore()
store.setApiKey('your-nowpayments-api-key')

// Use in your app
<DepositModal
  isOpen={showDeposit}
  onClose={() => setShowDeposit(false)}
  customerEmail="user@example.com"
  onSubmit={async (formData) => {
    // Send to your backend API
    const response = await fetch('/api/deposits', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(formData)
    })
    return response.json()
  }}
  onSuccess={(result) => {
    console.log('Deposit created:', result)
    setShowDeposit(false)
  }}
/>
```

## Form Schemas

The library provides fixed form schemas to ensure consistent data structure:

```typescript
// From DepositModal
interface DepositFormData {
  selectedCurrency: string // e.g., 'btc', 'eth'
  amount: number
  customerEmail?: string
}

// From WithdrawModal
interface WithdrawFormData {
  currency: 'usdttrc20' | 'usdtmatic'
  amount: number
  destinationAddress: string
}
```

Your backend receives this structured data and can add additional fields before processing.

## Browse Stories

Explore all components and their variations in the sidebar:

- **NOWPayments/DepositModal** - Cryptocurrency deposit flow
- **NOWPayments/WithdrawModal** - Cryptocurrency withdrawal flow
- **Shared Components** - Reusable UI building blocks
- **Theming** - CSS customization examples

Each story includes interactive controls to test different states and configurations.
